<!DOCTYPE html>  
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="This package help to calculate and visualise onset data. The emphasis is on comparing onsets between performers in the same ensemble, in other words, how well the performers synchronise to each other. There are also some routines to estimate to periodicity of the onsets.">
<title>Analysis and Visualisation of Synchronisation of Music Onset Data • onsetsync</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Analysis and Visualisation of Synchronisation of Music Onset Data">
<meta property="og:description" content="This package help to calculate and visualise onset data. The emphasis is on comparing onsets between performers in the same ensemble, in other words, how well the performers synchronise to each other. There are also some routines to estimate to periodicity of the onsets.">
<meta property="og:image" content="https://github.com/tuomaseerola/onsetsync/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">onsetsync</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/onsetsync.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="onsetsync---analysis-and-visualisation-of-synchronisation-of-music-onset-data">onsetsync - Analysis and Visualisation of Synchronisation of Music Onset Data<a class="anchor" aria-label="anchor" href="#onsetsync---analysis-and-visualisation-of-synchronisation-of-music-onset-data"></a>
</h1>
</div>
<!-- badges: start -->

<p><code>onsetsync</code> is a R package for musical assessing synchrony between onsets in music. There are functions for common operations such as adding isochronous beats based on metrical structure, adding annotations, calculating classic measures of synchrony between performers, and assessing periodicity of the onsets, and visualising synchrony across cycles, time, or another property.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the current version of <code>onsetsync</code> from Github by entering the following commands into R:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"tuomaseerola/onsetsync"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">onsetsync</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"onsetsync"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '0.4.6'</span></span></code></pre></div>
<div class="section level3">
<h3 id="reading-in-data">Reading in data<a class="anchor" aria-label="anchor" href="#reading-in-data"></a>
</h3>
<p>Read onsets of one Cuban Son performance titled <em>Palo Santo</em> from <em>IEMP</em> dataset at <a href="https://osf.io/sfxa2/" class="external-link uri">https://osf.io/sfxa2/</a>. This song has the onsets and the annotations about the metric cycles already extracted and defined and <strong>comes with the package</strong>.</p>
<p>Go and <a href="https://osf.io/z9uxs/" target="_blank" class="external-link">listen to the song at OSF</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CSS_Song2</span> <span class="op">&lt;-</span> <span class="fu">onsetsync</span><span class="fu">::</span><span class="va"><a href="reference/CSS_IEMP.html">CSS_IEMP</a></span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>   <span class="co"># Read one song from internal data</span></span>
<span><span class="va">CSS_Song2</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">CSS_Song2</span>,<span class="va">Label.SD</span>,<span class="va">SD</span>,<span class="va">Clave</span>,<span class="va">Bass</span>,<span class="va">Guitar</span>,<span class="va">Tres</span>,</span>
<span>                           <span class="va">CycleTime</span>,<span class="va">Cycle</span>,<span class="va">Isochronous.SD.Time</span><span class="op">)</span> <span class="co"># Select some columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">CSS_Song2</span><span class="op">)</span>,format <span class="op">=</span> <span class="st">"simple"</span>,digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="12%">
<col width="6%">
<col width="8%">
<col width="7%">
<col width="9%">
<col width="7%">
<col width="13%">
<col width="8%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="left">Label.SD</th>
<th align="right">SD</th>
<th align="right">Clave</th>
<th align="right">Bass</th>
<th align="right">Guitar</th>
<th align="right">Tres</th>
<th align="right">CycleTime</th>
<th align="right">Cycle</th>
<th align="right">Isochronous.SD.Time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1:1</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5.04</td>
<td align="right">1</td>
<td align="right">5.04</td>
</tr>
<tr class="even">
<td align="left">1:2</td>
<td align="right">2</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5.28</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">5.26</td>
</tr>
<tr class="odd">
<td align="left">1:3</td>
<td align="right">3</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5.48</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">5.48</td>
</tr>
<tr class="even">
<td align="left">1:4</td>
<td align="right">4</td>
<td align="right">NA</td>
<td align="right">5.71</td>
<td align="right">5.71</td>
<td align="right">5.73</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">5.71</td>
</tr>
<tr class="odd">
<td align="left">1:5</td>
<td align="right">5</td>
<td align="right">NA</td>
<td align="right">5.93</td>
<td align="right">5.94</td>
<td align="right">5.92</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">5.93</td>
</tr>
<tr class="even">
<td align="left">1:6</td>
<td align="right">6</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">6.15</td>
<td align="right">6.14</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">6.15</td>
</tr>
</tbody>
</table>
<p>Reading data from is easy either from CSV files in your computer or directly from OSF using <code>get_OSF_csv</code> function.</p>
</div>
<div class="section level3">
<h3 id="visualise-onsets-structures">Visualise onsets structures<a class="anchor" aria-label="anchor" href="#visualise-onsets-structures"></a>
</h3>
<p>As an overview, we can visualise the onsets across the beat sub-divisions for each instrument and do this across the time. Note that time run vertically (from bottom to up) here.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fig1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/plot_by_beat.html">plot_by_beat</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">CSS_Song2</span>, </span>
<span>                     instr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Bass'</span>,<span class="st">'Clave'</span>,<span class="st">'Guitar'</span>,<span class="st">'Tres'</span><span class="op">)</span>, </span>
<span>                     beat <span class="op">=</span> <span class="st">'SD'</span>, </span>
<span>                     virtual<span class="op">=</span><span class="st">'Isochronous.SD.Time'</span>,</span>
<span>                     pcols<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fig1</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-synch2isochron-1.png" width="75%"></p>
</div>
<div class="section level3">
<h3 id="calculate-asynchronies">Calculate asynchronies<a class="anchor" aria-label="anchor" href="#calculate-asynchronies"></a>
</h3>
<p>To what degree are the pairs of instruments synchronised to each other? Let’s visualise the synchrony of all pairings of the instruments in this example.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Clave'</span>,<span class="st">'Bass'</span>,<span class="st">'Guitar'</span>,<span class="st">'Tres'</span><span class="op">)</span> <span class="co"># Define instruments </span></span>
<span><span class="va">dn</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sync_execute_pairs.html">sync_execute_pairs</a></span><span class="op">(</span><span class="va">CSS_Song2</span>,<span class="va">inst</span>,<span class="fl">0</span>,<span class="fl">1</span>,<span class="st">'SD'</span><span class="op">)</span></span>
<span><span class="va">fig2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/plot_by_pair.html">plot_by_pair</a></span><span class="op">(</span><span class="va">dn</span><span class="op">)</span>  <span class="co"># plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fig2</span><span class="op">)</span>  </span></code></pre></div>
<p><img src="reference/figures/README-fig2-1.png" width="75%"></p>
<p>As we saw in the first figure, the instruments usually play widely different amounts of onsets in a piece, and these are bound to be at different beats sub-divisions, the mutual amount of comparable onsets for each pair often varies dramatically. Comparison of mean asynchronies across sub-divisions can be facilitated by taking random samples of the joint onsets. Here we choose a random 200 matching onsets and re-calculate the comparison of asynchrony with this subset 1000 times.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span> <span class="co"># set random seed</span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">200</span> <span class="co"># Let's select 200 onsets</span></span>
<span><span class="va">Bootstrap</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span>
<span><span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sync_sample_paired.html">sync_sample_paired</a></span><span class="op">(</span><span class="va">CSS_Song2</span>,<span class="st">'Clave'</span>,<span class="st">'Bass'</span>,<span class="va">N</span>,<span class="va">Bootstrap</span>,<span class="st">'SD'</span>,<span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "onsets in common: 241"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">'Mean asynchrony of'</span>,<span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">d1</span><span class="op">$</span><span class="va">asynch</span><span class="op">*</span><span class="fl">1000</span><span class="op">)</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>    <span class="st">'ms &amp; standard deviation of'</span>,<span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">d1</span><span class="op">$</span><span class="va">asynch</span><span class="op">*</span><span class="fl">1000</span><span class="op">)</span>,<span class="fl">1</span><span class="op">)</span>,<span class="st">'ms'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Mean asynchrony of 16.2 ms &amp; standard deviation of 19.5 ms"</span></span></code></pre></div>
<p>There are other measures to summarise the asynchronies and visualise them.</p>
<p>For more examples, see <a href="docs/articles/onsetsync.html">Get started</a>.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing onsetsync</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Tuomas Eerola <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tuomas Eerola.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
